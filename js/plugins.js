window.log = function f(){ log.history = log.history || []; log.history.push(arguments); if(this.console) { var args = arguments, newarr; args.callee = args.callee.caller; newarr = [].slice.call(args); if (typeof console.log === 'object') log.apply.call(console.log, console, newarr); else console.log.apply(console, newarr);}};
(function(a){function b(){}for(var c="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn".split(","),d;!!(d=c.pop());){a[d]=a[d]||b;}})
(function(){try{console.log();return window.console;}catch(a){return (window.console={});}}());
var Mustache;(function(exports){if(typeof module!=="undefined"){module.exports=exports}else if(typeof define==="function"){define(exports)}else{Mustache=exports}}(function(){var exports={};exports.name="mustache.js";exports.version="0.5.1-dev";exports.tags=["{{","}}"];exports.parse=parse;exports.clearCache=clearCache;exports.compile=compile;exports.compilePartial=compilePartial;exports.render=render;exports.Scanner=Scanner;exports.Context=Context;exports.Renderer=Renderer;exports.to_html=function(template,view,partials,send){var result=render(template,view,partials);if(typeof send==="function"){send(result)}else{return result}};var whiteRe=/\s*/;var spaceRe=/\s+/;var nonSpaceRe=/\S/;var eqRe=/\s*=/;var curlyRe=/\s*\}/;var tagRe=/#|\^|\/|>|\{|&|=|!/;function testRe(re,string){return RegExp.prototype.test.call(re,string)}function isWhitespace(string){return!testRe(nonSpaceRe,string)}var isArray=Array.isArray||function(obj){return Object.prototype.toString.call(obj)==="[object Array]"};var jsCharsRe=/[\x00-\x2F\x3A-\x40\x5B-\x60\x7B-\xFF\u2028\u2029]/gm;function quote(text){var escaped=text.replace(jsCharsRe,function(c){return"\\u"+('0000'+c.charCodeAt(0).toString(16)).slice(-4)});return'"'+escaped+'"'}function escapeRe(string){return string.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':'&quot;',"'":'&#39;',"/":'&#x2F;'};function escapeHtml(string){return String(string).replace(/[&<>"'\/]/g,function(s){return entityMap[s]})}exports.isWhitespace=isWhitespace;exports.isArray=isArray;exports.quote=quote;exports.escapeRe=escapeRe;exports.escapeHtml=escapeHtml;function Scanner(string){this.string=string;this.tail=string;this.pos=0}Scanner.prototype.eos=function(){return this.tail===""};Scanner.prototype.scan=function(re){var match=this.tail.match(re);if(match&&match.index===0){this.tail=this.tail.substring(match[0].length);this.pos+=match[0].length;return match[0]}return null};Scanner.prototype.scanUntil=function(re){var match,pos=this.tail.search(re);switch(pos){case-1:match=this.tail;this.pos+=this.tail.length;this.tail="";break;case 0:match=null;break;default:match=this.tail.substring(0,pos);this.tail=this.tail.substring(pos);this.pos+=pos}return match};function Context(view,parent){this.view=view;this.parent=parent;this.clearCache()}Context.make=function(view){return(view instanceof Context)?view:new Context(view)};Context.prototype.clearCache=function(){this._cache={}};Context.prototype.push=function(view){return new Context(view,this)};Context.prototype.lookup=function(name){var value=this._cache[name];if(!value){if(name==="."){value=this.view}else{var context=this;while(context){if(name.indexOf(".")>0){var names=name.split("."),i=0;value=context.view;while(value&&i<names.length){value=value[names[i++]]}}else{value=context.view[name]}if(value!=null){break}context=context.parent}}this._cache[name]=value}if(typeof value==="function"){value=value.call(this.view)}return value};function Renderer(){this.clearCache()}Renderer.prototype.clearCache=function(){this._cache={};this._partialCache={}};Renderer.prototype.compile=function(tokens,tags){if(typeof tokens==="string"){tokens=parse(tokens,tags)}var fn=compileTokens(tokens),self=this;return function(view){return fn(Context.make(view),self)}};Renderer.prototype.compilePartial=function(name,tokens,tags){this._partialCache[name]=this.compile(tokens,tags);return this._partialCache[name]};Renderer.prototype.render=function(template,view){var fn=this._cache[template];if(!fn){fn=this.compile(template);this._cache[template]=fn}return fn(view)};Renderer.prototype._section=function(name,context,callback){var value=context.lookup(name);switch(typeof value){case"object":if(isArray(value)){var buffer="";for(var i=0,len=value.length;i<len;++i){buffer+=callback(context.push(value[i]),this)}return buffer}return value?callback(context.push(value),this):"";case"function":var sectionText=callback(context,this),self=this;var scopedRender=function(template){return self.render(template,context)};return value.call(context.view,sectionText,scopedRender)||"";default:if(value){return callback(context,this)}}return""};Renderer.prototype._inverted=function(name,context,callback){var value=context.lookup(name);if(value==null||value===false||(isArray(value)&&value.length===0)){return callback(context,this)}return""};Renderer.prototype._partial=function(name,context){var fn=this._partialCache[name];if(fn){return fn(context,this)}return""};Renderer.prototype._name=function(name,context,escape){var value=context.lookup(name);if(typeof value==="function"){value=value.call(context.view)}var string=(value==null)?"":String(value);if(escape){return escapeHtml(string)}return string};function compileTokens(tokens,returnBody){var body=['""'];var token,method,escape;for(var i=0,len=tokens.length;i<len;++i){token=tokens[i];switch(token.type){case"#":case"^":method=(token.type==="#")?"_section":"_inverted";body.push("r."+method+"("+quote(token.value)+", c, function (c, r) {\n"+"  "+compileTokens(token.tokens,true)+"\n"+"})");break;case"{":case"&":case"name":escape=token.type==="name"?"true":"false";body.push("r._name("+quote(token.value)+", c, "+escape+")");break;case">":body.push("r._partial("+quote(token.value)+", c)");break;case"text":body.push(quote(token.value));break}}body="return "+body.join(" + ")+";";if(returnBody){return body}return new Function("c, r",body)}function escapeTags(tags){if(tags.length===2){return[new RegExp(escapeRe(tags[0])+"\\s*"),new RegExp("\\s*"+escapeRe(tags[1]))]}throw new Error("Invalid tags: "+tags.join(" "))}function nestTokens(tokens){var tree=[];var collector=tree;var sections=[];var token,section;for(var i=0;i<tokens.length;++i){token=tokens[i];switch(token.type){case"#":case"^":token.tokens=[];sections.push(token);collector.push(token);collector=token.tokens;break;case"/":if(sections.length===0){throw new Error("Unopened section: "+token.value)}section=sections.pop();if(section.value!==token.value){throw new Error("Unclosed section: "+section.value)}if(sections.length>0){collector=sections[sections.length-1].tokens}else{collector=tree}break;default:collector.push(token)}}section=sections.pop();if(section){throw new Error("Unclosed section: "+section.value)}return tree}function squashTokens(tokens){var lastToken;for(var i=0;i<tokens.length;++i){var token=tokens[i];if(lastToken&&lastToken.type==="text"&&token.type==="text"){lastToken.value+=token.value;tokens.splice(i--,1)}else{lastToken=token}}}function parse(template,tags){tags=tags||exports.tags;var tagRes=escapeTags(tags);var scanner=new Scanner(template);var tokens=[],spaces=[],hasTag=false,nonSpace=false;var stripSpace=function(){if(hasTag&&!nonSpace){while(spaces.length){tokens.splice(spaces.pop(),1)}}else{spaces=[]}hasTag=false;nonSpace=false};var type,value,chr;while(!scanner.eos()){value=scanner.scanUntil(tagRes[0]);if(value){for(var i=0,len=value.length;i<len;++i){chr=value.charAt(i);if(isWhitespace(chr)){spaces.push(tokens.length)}else{nonSpace=true}tokens.push({type:"text",value:chr});if(chr==="\n"){stripSpace()}}}if(!scanner.scan(tagRes[0])){break}hasTag=true;type=scanner.scan(tagRe)||"name";scanner.scan(whiteRe);if(type==="="){value=scanner.scanUntil(eqRe);scanner.scan(eqRe);scanner.scanUntil(tagRes[1])}else if(type==="{"){var closeRe=new RegExp("\\s*"+escapeRe("}"+tags[1]));value=scanner.scanUntil(closeRe);scanner.scan(curlyRe);scanner.scanUntil(tagRes[1])}else{value=scanner.scanUntil(tagRes[1])}if(!scanner.scan(tagRes[1])){throw new Error("Unclosed tag at "+scanner.pos)}tokens.push({type:type,value:value});if(type==="name"||type==="{"||type==="&"){nonSpace=true}if(type==="="){tags=value.split(spaceRe);tagRes=escapeTags(tags)}}squashTokens(tokens);return nestTokens(tokens)}var _renderer=new Renderer();function clearCache(){_renderer.clearCache()}function compile(tokens,tags){return _renderer.compile(tokens,tags)}function compilePartial(name,tokens,tags){return _renderer.compilePartial(name,tokens,tags)}function render(template,view,partials){if(partials){for(var name in partials){compilePartial(name,partials[name])}}return _renderer.render(template,view)}return exports}()));